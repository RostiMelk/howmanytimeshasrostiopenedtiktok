{"ast":null,"code":"var _jsxFileName = \"/Users/rostimelk/sites/howmanytimeshasrostiopenedtiktok/client/src/components/counter.component.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Metric from './metric.component';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst nearest = require('nearest-date');\n\nconst TimeLapsed = require('timelapsed');\n\nexport default class Counter extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      total: 0,\n      yTotal: 0,\n      date: new Date()\n    };\n  }\n\n  componentDidMount() {\n    axios.get('/count/').then(response => {\n      let dates = response.data.map(function (o, i) {\n        return o.date;\n      }).map(date => new Date(date));\n      let propDate = new Date(this.props.date);\n      let index = nearest(dates, propDate);\n      this.setState({\n        total: response.data[index].total,\n        yTotal: response.data[index - 1] !== undefined ? response.data[index - 1].total : response.data[index].total,\n        date: response.data[index].date\n      });\n    }).catch(error => console.log(error));\n  }\n\n  render() {\n    let title;\n\n    if (!this.props.date) {\n      title = 'Total';\n    } else if (TimeLapsed.fromTimestamp(this.props.date).includes('hours')) {\n      title = 'Today';\n    } else {\n      title = TimeLapsed.fromTimestamp(this.props.date);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"my-4 min-w-full w-80 max-w-full\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-5 bg-white rounded shadow-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-base text-gray-400 \",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center pt-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-gray-900 \",\n            children: [this.state.total, \" times\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 25\n          }, this), this.props.date ? /*#__PURE__*/_jsxDEV(Metric, {\n            total: this.state.total,\n            yTotal: this.state.yTotal\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 44\n          }, this) : '']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/rostimelk/sites/howmanytimeshasrostiopenedtiktok/client/src/components/counter.component.js"],"names":["React","Component","axios","Metric","nearest","require","TimeLapsed","Counter","constructor","props","state","total","yTotal","date","Date","componentDidMount","get","then","response","dates","data","map","o","i","propDate","index","setState","undefined","catch","error","console","log","render","title","fromTimestamp","includes"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport Metric from './metric.component';\nconst nearest = require('nearest-date');\nconst TimeLapsed = require('timelapsed');\n\nexport default class Counter extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            total: 0,\n            yTotal: 0,\n            date: new Date(),\n        }\n    }\n\n    componentDidMount() {\n        axios.get('/count/')\n            .then(response => {\n                let dates = response.data.map(function(o,i) {\n                    return o.date;\n                }).map(date => new Date(date)); \n                let propDate = new Date(this.props.date);\n                let index = nearest(dates, propDate);\n\n                this.setState({\n                    total: response.data[index].total,\n                    yTotal: response.data[index - 1] !== undefined ? response.data[index - 1].total : response.data[index].total,\n                    date: response.data[index].date,\n                })\n            })\n            .catch((error) => console.log(error))\n    }\n\n    render() {\n        let title;\n\n        if ( ! this.props.date ) {\n            title = 'Total'\n        } else if ( TimeLapsed.fromTimestamp(this.props.date).includes('hours') ) {\n            title = 'Today'\n        } else {\n            title = TimeLapsed.fromTimestamp(this.props.date)\n        }\n\n        return (\n            <div className=\"my-4 min-w-full w-80 max-w-full\">\n                <div className=\"p-5 bg-white rounded shadow-sm\">\n                    <div className=\"text-base text-gray-400 \">\n                        {title}\n                    </div>\n                    <div className=\"flex items-center pt-1\">\n                        <div className=\"text-2xl font-bold text-gray-900 \">{this.state.total} times</div>\n                        {this.props.date ? <Metric total={this.state.total} yTotal={this.state.yTotal} /> : ''}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}